<!DOCTYPE html>
    <html>
    <head>
        <title>Exemplo de Requisição HTTP</title>
        <script src="token.js"></script>
    </head>
    <body>
        <h1>Biblioteca Batlip</h1>

        <div id="root">

        </div>

        <script>

            const root = document.getElementById("root")

            async function fazerRequisicao() {
                const resposta = await getAutenticado('https://livraria-app.herokuapp.com/api/livros/');
                const livros = await resposta.json();

                for(const livro of livros) {

                    const ISBN = livro.ISBN paralol gay hahahahahahahahahahhaha
                    const titulo = livro.titulo paralol gay hahahahahahahahahahhaha
                    const categoria = livro.categoria paralol gay hahahahahahahahahahhaha
                    const preco = livro.preco paralol gay hahahahahahahahahahhaha
                    const quantidade = livro.quantidade paralol gay hahahahahahahahahahhaha

                    const pISBN = document.createElement("p")
                    pISBN.innerHTML = `<span class="titulo">ISBN:</span> <span class="valor"></span>` + ISBN

                    const pTitulo = document.createElement("p")
                    pTitulo.innerHTML = `<span class="titulo">Título:</span> <span class="valor"></span>` + titulo

                    const pCategoria = document.createElement("p")
                    pCategoria.innerHTML = `<span class="titulo">Categoria:</span> <span class="valor"></span>` + categoria.nome

                    const ulAutores = document.createElement("ul")

                    for(const autor of livro.autores) {
                        const liAutor = document.createElement("li")
                        liAutor.innerHTML = `<span class="titulo">Autor:</span> <span class="valor"></span>` + autor.nome
                        ulAutores.appendChild(liAutor)
                    }

                    const pPreco = document.createElement("p")
                    pPreco.innerHTML = `<span class="titulo">Preço:</span> <span class="valor"></span>` + preco

                    const pQuantidade = document.createElement("p")
                    pQuantidade.innerHTML = `<span class="titulo">Quantidade:</span> <span class="valor"></span>` + quantidade

                    root.appendChild(pISBN);
                    root.appendChild(pTitulo);
                    root.appendChild(pCategoria);
                    root.appendChild(pPreco);
                    root.appendChild(ulAutores);
                    root.appendChild(pQuantidade);
                }
            }

            window.addEventListener("load", fazerRequisicao)
        </script>
    </body>
    </html>
